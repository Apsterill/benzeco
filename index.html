<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>BENZ&Co</title>
<link rel="icon" type="image/jpeg" href="immagini/logo2.png">
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">

<style>
/* ... (Tutto il tuo CSS precedente rimane invariato fino a .card img) ... */
*{ box-sizing:border-box; font-family:'Poppins',sans-serif; }
body{ margin:0; background:#f5f5f5; color:#111; }
header{ background:#000; color:#fff; padding:10px 20px; text-align:center; position:sticky; top:0; z-index:100; }
header img{ height:190px; display:block; margin:0 auto 5px; }
nav{ margin-top:-50px; display:flex; justify-content:center; gap:22px; }
nav button{ background:transparent; color:#fff; border:1px solid #fff; padding:10px 22px; border-radius:30px; cursor:pointer; transition:.3s; }
nav button:hover{ background:#fff; color:#000; }
.container{ max-width:1300px; margin:auto; padding:55px 20px; }
.filters{ display:flex; justify-content:center; gap:26px; flex-wrap:wrap; background:#fff; padding:35px 30px; border-radius:18px; box-shadow:0 12px 40px rgba(0,0,0,.08); margin-bottom:55px; }
.filters div{text-align:center;}
.filters label{ font-size:15px; font-weight:500; }
select{ margin-top:10px; padding:16px 22px; min-width:170px; border-radius:40px; border:1px solid #bbb; font-size:15px; }
.grid{ display:grid; grid-template-columns:repeat(auto-fill,minmax(280px,1fr)); gap:35px; }

/* MODIFICHE ALLA CARD E IMMAGINE */
.card{
  background:#fff;
  border-radius:20px;
  box-shadow:0 20px 50px rgba(0,0,0,.12);
  cursor:pointer;
  max-width:320px;
  height:390px;
  margin:auto;
  display:flex;
  flex-direction:column;
  overflow:hidden;
  transition:.35s;
}

.card:hover{ transform:translateY(-8px); }

/* Contenitore immagine per gestire il caricamento */
.img-container {
  width: 100%;
  height: 185px;
  position: relative;
  background: #eee; /* Colore di sfondo mentre carica */
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: hidden;
}

.card img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  opacity: 0; /* Inizialmente invisibile */
  transition: opacity 0.5s ease-in-out;
}

/* Lo Spinner di caricamento */
.loader {
  width: 30px;
  height: 30px;
  border: 3px solid #ddd;
  border-top: 3px solid #333;
  border-radius: 50%;
  position: absolute;
  animation: spin 1s linear infinite;
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

.card-content{ padding:16px 20px; flex:1; display:flex; flex-direction:column; justify-content:space-between; text-align:center; }
.card-content h3{ margin:0; font-size:16px; font-weight:500; line-height:1.3; display:-webkit-box; -webkit-line-clamp:2; -webkit-box-orient:vertical; overflow:hidden; min-height:42px; }
.card-info{ display:flex; justify-content:center; gap:8px; margin:10px 0; flex-wrap:wrap; }
.card-info span{ background:#eee; padding:5px 10px; border-radius:14px; font-size:12px; font-weight:500; }
.price{ font-size:18px; font-weight:600; margin-top:10px; }
.empty-message{ grid-column:1/-1; text-align:center; padding:60px; font-size:18px; color:#777; }
footer{ background:#000; color:#aaa; text-align:center; padding:22px; font-size:13px; }
</style>
</head>

<body>

<header>
  <img src="immagini/logo.jpeg" alt="Logo BENZ&Co">
  <nav>
    <button onclick="location.href='index.html'">Home</button>
    <button onclick="location.href='chi-siamo.html'">Chi siamo</button>
    <button onclick="location.href='contatti.html'">Contatti</button>
  </nav>
</header>

<div class="container">
    <div class="filters">
        <div>
          <label>Marca</label><br>
          <select id="modelFilter" onchange="filterCars()">
            <option value="">Tutte</option>
            <option>Lancia</option>
            <option>Fiat</option>
            <option>Iveco</option>
            <option>Volkswagen</option>
            <option>Audi</option>
            <option>Alfa Romeo</option>
            <option>BMW</option>
            <option>Peugeot</option>
            <option>Land Rover</option>
            <option>Citroën</option>
            <option>Renault</option>
          </select>
        </div>
        <div>
          <label>Alimentazione</label><br>
          <select id="fuelFilter" onchange="filterCars()">
            <option value="">Tutte</option>
            <option>Diesel</option>
            <option>Benzina</option>
            <option>Metano</option>
            <option>Elettrica</option>
          </select>
        </div>
        <div>
          <label>Tipologia</label><br>
          <select id="typeFilter" onchange="filterCars()">
            <option value="">Tutte</option>
            <option>Berlina</option>
            <option>SUV</option>
            <option>Station Wagon</option>
            <option>Furgone</option>
          </select>
        </div>
        <div>
          <label>Cambio</label><br>
          <select id="gearFilter" onchange="filterCars()">
            <option value="">Tutti</option>
            <option>Manuale</option>
            <option>Automatico</option>
            <option>Semiutomatico</option>
          </select>
        </div>
        <div>
          <label>Colore</label><br>
          <select id="colorFilter" onchange="filterCars()">
            <option value="">Tutti</option>
            <option>Nero</option>
            <option>Bianco</option>
            <option>Blu</option>
            <option>Rosso</option>
          </select>
        </div>
    </div>

    <div class="grid" id="carGrid"></div>
</div>

<footer>
© 2025 BENZ&Co · Affidabilità, Qualità e Serietà
</footer>

<script>
// I tuoi dati rimangono gli stessi
const carsData=[
  {model:['Lancia'],type:'Berlina',fuel:'Metano',gear:'Manuale',color:'Blu',title:'Lancia Ypsilon 2017 0.9 Metano',price:'€ 5.999',image:'ypsilon.png',page:'lancia-ypsilon.html'},
  {model:['Peugeot'],type:'Station Wagon',fuel:'Diesel',gear:'Automatico',color:'Nero',title:'Peugeot 308 sw 1.5 hdi [NUOVA] [GARANZIA PEUGEOT]',price:'€ 24.700',image:'peugeot308.jpg',page:'peugeot308.html'},
  {model:['Peugeot'],type:'Berlina',fuel:'Elettrica',gear:'Automatico',color:'Bianco',title:'Peugeot e-208 Active 100kW my20',price:'€ 13.500',image:'p208.jpg',page:'peugeot208.html'},
  {model:['Land Rover'],type:'SUV',fuel:'Diesel',gear:'Manuale',color:'Nero',title:'Land Rover Freelander TD4 16v Cat SPORT Cabrio',price:'€ 2.999',image:'fl.jpg',page:'freelander.html'},
  {model:['BMW'],type:'Berlina',fuel:'Benzina',gear:'Automatico',color:'Nero',title:'BMW M3 Competition [GARANZIA BMW FINO AL 2027]',price:'€ 99.999',image:'m3.jpg',page:'m3.html'},
  {model:['Audi'],type:'Berlina',fuel:'Benzina',gear:'Semiautomatico',color:'Nero',title:'Audi RS3 Sportback [GARANZIA AUDI FINO AL 2027]',price:'€ 52.900',image:'rs3.webp',page:'rs3.html'},
  {model:['Alfa Romeo'],type:'Berlina',fuel:'Benzina',gear:'Manuale',color:'Rosso',title:'Alfa Romeo Giulia 2.9 t V6 Quadrifoglio 510cv',price:'€ 54.800',image:'ar.jpg',page:'alfaromeo.html'},
  {model:['Fiat'],type:'Furgone',fuel:'Metano',gear:'Manuale',color:'Bianco',title:'Fiat Doblo 1.4 tjet 16v Natural Power 120cv',price:'€ 4.300',image:'doblo.jpg',page:'doblo.html'},
  {model:['Volkswagen'],type:'Furgone',fuel:'Diesel',gear:'Manuale',color:'Bianco',title:'Volkswagen LT46 [GEMELLATO]',price:'€ 4.400',image:'lt46.jpg',page:'lt46.html'},
  {model:['Fiat'],type:'Furgone',fuel:'Diesel',gear:'Manuale',color:'Rosso',title:'Fiat Fiorino 1.3 MJT 95CV Adventure E5+',price:'€ 3.802',image:'fiorinorosso.png',page:'fiorinorosso.html'},
  {model:['Fiat'],type:'Furgone',fuel:'Diesel',gear:'Manuale',color:'Bianco',title:'Fiat Ducato 33 CH1 2.3 Multijet 120CV E6D-temp',price:'€ 10.499',image:'ducato33ch1.png',page:'ducato33ch1.html'},
  {model:['Iveco'],type:'Furgone',fuel:'Diesel',gear:'Manuale',color:'Bianco',title:'Iveco Daily ATP 2028 35C18 3.0 180CV Frigo Thermo King',price:'€ 18.400',image:'daily.png',page:'daily.html'},
  {model:['Peugeot', 'Fiat'],type:'Furgone',fuel:'Diesel',gear:'Manuale',color:'Bianco',title:'Fiat Ducato | Peugeot Boxer BlueHDi 130CV L3H2',price:'€ 10.999',image:'boxer.png',page:'boxer.html'},
  {model:['Fiat'],type:'Furgone',fuel:'Diesel',gear:'Manuale',color:'Bianco',title:'Fiat Ducato Maxi L3H2 150CV',price:'€ 9.999',image:'maxil3h2.jpg',page:'maxil3h2.html'},
  {model:['Fiat'],type:'Furgone',fuel:'Diesel',gear:'Manuale',color:'Bianco',title:'Fiat Ducato L3H2 2.3 MJT 140CV [MOTORE NUOVO]',price:'€ 12.999',image:'ducatomotore.png',page:'motorenuovo.html'},
  {model:['Citroën', 'Fiat'],type:'Furgone',fuel:'Diesel',gear:'Manuale',color:'Bianco',title:'Fiat Ducato | Citroën Jumper 35 L2H2 BlueHDi 140 CV',price:'€ 10.600',image:'jumper.png',page:'jumper.html'},
  {model:['Fiat'],type:'Furgone',fuel:'Diesel',gear:'Manuale',color:'Bianco',title:'Fiat Ducato Maxi 35 xl L4 H2 2.2 MJT³ 140CV',price:'€ 15.899',image:'rosso.png',page:'rosso.html'}
];

const grid=document.getElementById('carGrid');

function filterCars(){
  grid.innerHTML='';
  const modelVal=document.getElementById('modelFilter').value;
  const fuelVal=document.getElementById('fuelFilter').value;
  const typeVal=document.getElementById('typeFilter').value;
  const gearVal=document.getElementById('gearFilter').value;
  const colorVal=document.getElementById('colorFilter').value;

  const filtered=carsData.filter(c=>
    (!modelVal || c.model.includes(modelVal)) &&
    (!fuelVal || c.fuel === fuelVal) &&
    (!typeVal || c.type === typeVal) &&
    (!gearVal || c.gear === gearVal) &&
    (!colorVal || c.color === colorVal)
  );

  if(!filtered.length){
    grid.innerHTML='<div class="empty-message">Nessun veicolo disponibile</div>';
    return;
  }

  filtered.forEach(c=>{
    const card=document.createElement('div');
    card.className='card';
    
    // Struttura con contenitore immagine e loader
    card.innerHTML=`
      <div class="img-container">
        <div class="loader"></div>
        <img src="immagini/${c.image}" alt="${c.title}" onload="revealImage(this)">
      </div>
      <div class="card-content">
        <h3>${c.title}</h3>
        <div class="card-info">
          <span>${c.type}</span>
          <span>${c.fuel}</span>
          <span>${c.gear}</span>
        </div>
        <div class="price">${c.price}</div>
      </div>`;
    
    card.onclick=()=>window.open(c.page,'_blank');
    grid.appendChild(card);
  });
}

// Funzione che nasconde il loader e mostra l'immagine quando è pronta
function revealImage(imgElement) {
    const loader = imgElement.parentElement.querySelector('.loader');
    if(loader) loader.style.display = 'none';
    imgElement.style.opacity = '1';
}

filterCars();
</script>

</body>
</html>
